--// AUTO KEY PRESS GUI by NTBA

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Tạo GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AutoPressGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Tạo Frame (bảng)
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 220, 0, 310)
frame.Position = UDim2.new(0, 50, 0, 50)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
frame.BorderSizePixel = 0
frame.Visible = true
frame.Active = true             -- 👈 Bắt sự kiện chuột
frame.Draggable = true          -- 👈 Cho phép kéo frame
frame.Parent = screenGui

-- Tiêu đề
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.Text = "Auto Key Presser"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 22
title.Parent = frame

-- Tác giả
local authorLabel = Instance.new("TextLabel")
authorLabel.Size = UDim2.new(1, 0, 0, 20)
authorLabel.Position = UDim2.new(0, 0, 1, -25)
authorLabel.BackgroundTransparency = 1
authorLabel.Text = "Tác giả: NTBA"
authorLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
authorLabel.Font = Enum.Font.SourceSansItalic
authorLabel.TextSize = 16
authorLabel.Parent = frame

-- Danh sách phím và trạng thái
local keys = {"Z", "X", "C", "V", "R"}
local toggles = {}

-- Hàm auto nhấn phím
local function autoPressKey(key)
    while toggles[key] do
        VirtualInputManager:SendKeyEvent(true, key, false, game)
        wait(0.1)
        VirtualInputManager:SendKeyEvent(false, key, false, game)
        wait(0.5)
    end
end

-- Tạo nút cho từng phím
for i, key in ipairs(keys) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -20, 0, 40)
    btn.Position = UDim2.new(0, 10, 0, 40 * i + 10)
    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    btn.BorderSizePixel = 0
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.SourceSans
    btn.TextSize = 20
    btn.Text = key .. ": OFF"
    btn.Parent = frame

    toggles[key] = false

    btn.MouseButton1Click:Connect(function()
        toggles[key] = not toggles[key]
        if toggles[key] then
            btn.Text = key .. ": ON"
            spawn(function() autoPressKey(key) end)
        else
            btn.Text = key .. ": OFF"
        end
    end)
end

-- Nhấn RightControl để ẩn/hiện GUI
local lastToggleTime = 0
local debounceTime = 0.3

RunService.Heartbeat:Connect(function()
    if UserInputService:IsKeyDown(Enum.KeyCode.RightControl) then
        local currentTime = tick()
        if currentTime - lastToggleTime > debounceTime then
            frame.Visible = not frame.Visible
            lastToggleTime = currentTime
        end
    end
end)
