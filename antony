-- AutoFruit & Skills by NTBA

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local player = Players.LocalPlayer

local settings = {
    autofruit = false,
    z = false,
    x = false,
    c = false,
    v = false,
    haki = false
}

-- Tạo GUI
local gui = Instance.new("ScreenGui")
gui.Name = "AutoFruitGui"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")
gui.Enabled = false

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 220, 0, 300)
frame.Position = UDim2.new(0, 20, 0, 100)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.BorderSizePixel = 0
frame.ClipsDescendants = true

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.Text = "AutoFruit & Skills - NTBA"
title.TextColor3 = Color3.fromRGB(120, 255, 120)
title.Font = Enum.Font.SourceSansBold
title.TextSize = 20

local uilist = Instance.new("UIListLayout", frame)
uilist.Padding = UDim.new(0, 8)
uilist.SortOrder = Enum.SortOrder.LayoutOrder

local function createToggle(name)
    local btn = Instance.new("TextButton", frame)
    btn.Size = UDim2.new(1, -20, 0, 40)
    btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    btn.TextColor3 = Color3.fromRGB(220, 220, 220)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 18
    btn.Text = name .. ": OFF"
    btn.AutoButtonColor = true

    btn.MouseButton1Click:Connect(function()
        local key = name:lower()
        settings[key] = not settings[key]
        btn.Text = name .. ": " .. (settings[key] and "ON" or "OFF")
        btn.BackgroundColor3 = settings[key] and Color3.fromRGB(50, 150, 50) or Color3.fromRGB(40, 40, 40)
    end)
end

createToggle("AutoFruit")
createToggle("Z")
createToggle("X")
createToggle("C")
createToggle("V")
createToggle("Haki")

-- Bật tắt GUI bằng Ctrl phải
UIS.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.KeyCode == Enum.KeyCode.RightControl then
        gui.Enabled = not gui.Enabled
    end
end)

-- Hàm gửi phím an toàn, không spam quá nhanh
local function sendKey(key)
    VirtualInputManager:SendKeyEvent(true, key, false, game)
    task.wait(0.1)
    VirtualInputManager:SendKeyEvent(false, key, false, game)
end

-- Vòng lặp chính auto nhấn phím
task.spawn(function()
    while true do
        if settings.autofruit then
            if settings.z then
                sendKey(Enum.KeyCode.Z)
                print("Auto press Z")
            end
            if settings.x then
                sendKey(Enum.KeyCode.X)
                print("Auto press X")
            end
            if settings.c then
                sendKey(Enum.KeyCode.C)
                print("Auto press C")
            end
            if settings.v then
                sendKey(Enum.KeyCode.V)
                print("Auto press V")
            end
            if settings.haki then
                sendKey(Enum.KeyCode.R)
                print("Auto press R (Haki)")
            end
            task.wait(1) -- delay giữa các lần nhấn
        else
            task.wait(1)
        end
    end
end)
