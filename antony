-- ================================================================= --
-- NTBA FARM HUB - V21.2.5 (TÃCH Há»¢P AUTO HAKI ADAPTIVE/SPAM & AUTO Q)
-- CHÃš THÃCH Cáº¬P NHáº¬T:
-- 1. XÃ³a Auto Haki (R) chu ká»³ 7s/1s cÅ©.
-- 2. TÃ­ch há»£p toÃ n bá»™ logic Auto Haki/Auto Q (Adaptive/Spam) cá»§a AutoHakiPermanent_v4.
-- 3. GUI cá»§a AutoHakiPermanent_v4 Ä‘Æ°á»£c nhÃºng vÃ o Panel "AutoHaki" cá»§a Hub.
-- ================================================================= --

local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local player = Players.LocalPlayer
local Character = player.Character or player.CharacterAdded:Wait()
local hrp = Character:WaitForChild("HumanoidRootPart")
local Backpack = player:WaitForChild("Backpack")
local CoreGui = game:GetService("CoreGui")

-- ================================================================= --
-- BIáº¾N Há»† THá»NG CHUNG (KHÃ”NG THAY Äá»”I)
-- ================================================================= --
local AutoFarmNPC = false
local FarmRadius = 150
local AutoSkillState={Z=false,X=false,C=false,V=false}
local AutoDropItem = false
local AutoDropItemPlus = falseÂ 
local Hotkey = Enum.KeyCode.RightControl
local HubVisible = true
local GodModeState = false

-- [[ THÃ”NG Sá» LOOT FRUIT MIX (CHEST) ]]
local AutoCollectChestState = false
local CollectChestRadius = 250
local CHEST_MODEL_NAME = "Crate"Â 
local CLICKABLE_PART_NAME = "Crate"Â 
-- ---------------------------------------------------

-- DANH SÃCH DROP CÅ¨ VÃ€ Má»šI (KHÃ”NG THAY Äá»”I)
local ITEM_DROP_LIST = {
Â  Â  ["Apple"] = true, ["Cantaloup"] = true, ["Cantaloupe"] = true, ["Banana"] = true,
Â  Â  ["Green Apple"] = true, ["Coconut"] = true, ["Pumpkin"] = true,
Â  Â  ["Prickly Pear"] = true, ["Melon"] = true,
}
local ITEM_DROP_PLUS_LIST = {
Â  Â  ["Cider+"] = true, ["Lemonade+"] = true, ["Juice+"] = true, ["Smoothie+"] = true,
}

local function findDroppableItemInList(dropList)
Â  Â  for _, item in ipairs(Backpack:GetChildren()) do
Â  Â  Â  Â  if (item:IsA("Tool") or item:IsA("HopperBin")) and dropList[item.Name] then
Â  Â  Â  Â  Â  Â  return item
Â  Â  Â  Â  end
Â  Â  end
Â  Â  return nil
end

player.CharacterAdded:Connect(function(newCharacter)
Â  Â  Character = newCharacter
Â  Â  hrp = Character:WaitForChild("HumanoidRootPart")
Â  Â  if GodModeState then task.wait(0.2) end
end)

pcall(function()
Â  Â  if player:FindFirstChild("PlayerGui") and player.PlayerGui:FindFirstChild("FruitHubUI") then
Â  Â  Â  Â  player.PlayerGui.FruitHubUI:Destroy()
Â  Â  end
end)

local PlayerGui = player:WaitForChild("PlayerGui", 5)
if not PlayerGui then return end

-- ================================================================= --
-- TÃCH Há»¢P CODE AUTO HAKI Má»šI
-- ================================================================= --

-- BIáº¾N AUTO HAKI
local DEFAULT_KEY = "R"
local SECONDARY_KEY = "Q"Â 
local DEFAULT_INTERVAL = 0.15
local SAMPLE_WINDOW = 6
local MIN_INTERVAL = 0.02
local MAX_INTERVAL = 3

local isRunningR = false Â -- Tráº¡ng thÃ¡i cháº¡y cho phÃ­m R (chá»©c nÄƒng chÃ­nh)
local isRunningQ = false Â -- Tráº¡ng thÃ¡i cháº¡y cho phÃ­m Q
local currentMode = "Adaptive"

local CooldownData = {
Â  Â  pressCount = 0,
Â  Â  successCount = 0,
Â  Â  lastSamples = {},
Â  Â  lastPressTime = 0
}

-- HÃ€M CORE CHO AUTO HAKI
local function doKeyTap(keyName)
Â  Â  pcall(function()
Â  Â  Â  Â  VirtualInputManager:SendKeyEvent(true, keyName, false, game)
Â  Â  Â  Â  task.wait(0.01)
Â  Â  Â  Â  VirtualInputManager:SendKeyEvent(false, keyName, false, game)
Â  Â  end)
Â  Â  return true
end

local function simpleClamp(n, lo, hi)
Â  Â  return math.max(lo, math.min(hi, n))
end

local function simpleInterval(txt)
Â  Â  local n = tonumber(txt) or DEFAULT_INTERVAL
Â  Â  return simpleClamp(n, MIN_INTERVAL, MAX_INTERVAL)
end

local function simpleReadGUI(obj)
Â  Â  if not obj or not obj:IsA("GuiObject") then return nil end
Â  Â  return obj.Size.X.Scale
end

local function simpleFindGUI()
Â  Â  local pg = player and player:FindFirstChild("PlayerGui")
Â  Â  if not pg then return nil end
Â  Â  
Â  Â  for _, obj in ipairs(pg:GetDescendants()) do
Â  Â  Â  Â  if obj:IsA("GuiObject") and (obj.Name:lower():find("bar") or obj.Name:lower():find("cooldown")) then
Â  Â  Â  Â  Â  Â  return obj
Â  Â  Â  Â  end
Â  Â  end
Â  Â  return nil
end

local function checkCooldown(targetGUI)
Â  Â  if not targetGUI or currentMode == "Spam" then return end
Â  Â  local startVal = simpleReadGUI(targetGUI)
Â  Â  if not startVal then return end
Â  Â  local startTime = tick()
Â  Â  local maxWait = 5
Â  Â  while tick() - startTime < maxWait do
Â  Â  Â  Â  local currentVal = simpleReadGUI(targetGUI)
Â  Â  Â  Â  if currentVal and math.abs(currentVal - startVal) > 0.1 then
Â  Â  Â  Â  Â  Â  local cooldownStart = tick()
Â  Â  Â  Â  Â  Â  while tick() - cooldownStart < maxWait do
Â  Â  Â  Â  Â  Â  Â  Â  local checkVal = simpleReadGUI(targetGUI)
Â  Â  Â  Â  Â  Â  Â  Â  if checkVal and (checkVal <= 0.05 or checkVal >= 0.95) then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  local duration = tick() - CooldownData.lastPressTime
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if duration > 0.1 and duration < MAX_INTERVAL * 2 then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  table.insert(CooldownData.lastSamples, duration)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if #CooldownData.lastSamples > SAMPLE_WINDOW then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  table.remove(CooldownData.lastSamples, 1)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  CooldownData.successCount = CooldownData.successCount + 1
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return
Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  task.wait(0.05)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  break
Â  Â  Â  Â  end
Â  Â  Â  Â  task.wait(0.05)
Â  Â  end
end

local function getSmartInterval()
Â  Â  if #CooldownData.lastSamples == 0 then
Â  Â  Â  Â  return simpleInterval(DEFAULT_INTERVAL) -- DÃ¹ng default vÃ¬ ko cÃ³ TextBox á»Ÿ Ä‘Ã¢y
Â  Â  end
Â  Â  local total = 0
Â  Â  for _, sample in ipairs(CooldownData.lastSamples) do
Â  Â  Â  Â  total = total + sample
Â  Â  end
Â  Â  local avg = total / #CooldownData.lastSamples
Â  Â  return simpleClamp(avg - 0.05, MIN_INTERVAL, MAX_INTERVAL)
end


-- ================================================================= --
-- PHáº¦N UI Cá»¦A HUB CHÃNH
-- ================================================================= --
local MAIN_W, MAIN_H = 600, 380
local Sidebar_W = 130
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "FruitHubUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

local Main = Instance.new("Frame")
Main.Name = "Main"
Main.Size = UDim2.new(0, MAIN_W, 0, MAIN_H)
Main.Position = UDim2.new(0.5, -MAIN_W/2, 0.12, 0)
Main.BackgroundColor3 = Color3.fromRGB(24,24,28)
Main.BackgroundTransparency = 0.15
Main.BorderSizePixel = 0
Main.Parent = ScreenGui
Instance.new("UICorner", Main).CornerRadius = UDim.new(0,12)

-- ... (Táº¥t cáº£ pháº§n UI/TitleBar/Sidebar/Tabs giá»¯ nguyÃªn) ...

local Sidebar = Instance.new("Frame")
Sidebar.Size = UDim2.new(0,Sidebar_W,1,-32)
Sidebar.Position = UDim2.new(0,0,0,32)
Sidebar.BackgroundColor3 = Color3.fromRGB(36,36,38)
Sidebar.BackgroundTransparency = 0.15
Sidebar.BorderSizePixel = 0
Sidebar.Parent = Main
Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0,10)

local tabs = {"AutoFarm","AutoNPC","AutoHaki","Fruit Mix","Utility","Settings"}
local tabButtons, panels = {}, {}

local SidebarLayout = Instance.new("UIListLayout", Sidebar)
SidebarLayout.Padding = UDim.new(0,6)
SidebarLayout.SortOrder = Enum.SortOrder.LayoutOrder
SidebarLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
SidebarLayout.VerticalAlignment = Enum.VerticalAlignment.Top

local Panel_X_Start = Sidebar_W + 10
local Panel_Y_Start = 32 + 10
local Panel_W = MAIN_W - Sidebar_W - 20
local Panel_H = MAIN_H - 32 - 20

for i,name in ipairs(tabs) do
Â  Â  local btn = Instance.new("TextButton")
Â  Â  -- ... (Táº¡o nÃºt Tab) ...
Â  Â  btn.Size = UDim2.new(1,-10,0,32)
Â  Â  btn.BackgroundColor3 = Color3.fromRGB(44,44,46)
Â  Â  btn.BackgroundTransparency = 0.2
Â  Â  btn.BorderSizePixel = 0
Â  Â  btn.Font = Enum.Font.GothamBold
Â  Â  btn.TextSize = 13
Â  Â  btn.TextColor3 = Color3.fromRGB(220,220,220)
Â  Â  btn.Text = name
Â  Â  btn.Parent = Sidebar
Â  Â  Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)
Â  Â  btn.LayoutOrder = i
Â  Â  tabButtons[name] = btn

Â  Â  local panel = Instance.new("Frame")
Â  Â  panel.Name = name .. "Panel"
Â  Â  panel.Size = UDim2.new(0, Panel_W, 0, Panel_H)
Â  Â  panel.Position = UDim2.new(0, Panel_X_Start, 0, Panel_Y_Start)
Â  Â  panel.BackgroundTransparency = 1
Â  Â  panel.Visible = false
Â  Â  panel.Parent = Main
Â  Â  panels[name] = panel
end

panels["AutoFarm"].Visible = true
tabButtons["AutoFarm"].BackgroundColor3 = Color3.fromRGB(60,60,62)
tabButtons["AutoFarm"].BackgroundTransparency = 0.1

for name, btn in pairs(tabButtons) do
Â  Â  btn.MouseButton1Click:Connect(function()
Â  Â  Â  Â  for k,v in pairs(tabButtons) do v.BackgroundColor3 = Color3.fromRGB(44,44,46); v.BackgroundTransparency = 0.2 end
Â  Â  Â  Â  for _,p in pairs(panels) do p.Visible = false end
Â  Â  Â  Â  btn.BackgroundColor3 = Color3.fromRGB(60,60,62)
Â  Â  Â  Â  btn.BackgroundTransparency = 0.1
Â  Â  Â  Â  panels[name].Visible = true
Â  Â  end)
end

-- ================================================================= --
-- PANEL AUTO HAKI (Má»šI)
-- ================================================================= --

local AutoHakiPanel = panels["AutoHaki"]
local targetGUI = nil -- Biáº¿n lÆ°u trá»¯ GUI cooldown

do
Â  Â  local p = AutoHakiPanel
Â  Â  p.BackgroundTransparency = 0.95 -- Äáº·t láº¡i Ä‘á»ƒ nÃ³ trong suá»‘t hÆ¡n
Â  Â  local y = 6

Â  Â  local title = Instance.new("TextLabel")
Â  Â  title.Size = UDim2.new(1, 0, 0, 25)
Â  Â  title.Position = UDim2.new(0, 0, 0, y)
Â  Â  title.BackgroundTransparency = 1
Â  Â  title.Text = "AutoHaki ADAPTIVE/SPAM (R & Q)"
Â  Â  title.TextColor3 = Color3.fromRGB(0, 255, 0)
Â  Â  title.Font = Enum.Font.SourceSansBold
Â  Â  title.TextSize = 16
Â  Â  title.Parent = p
Â  Â  y = y + 25

Â  Â  local status = Instance.new("TextLabel")
Â  Â  status.Name = "StatusLabel"
Â  Â  status.Size = UDim2.new(1, -10, 0, 20)
Â  Â  status.Position = UDim2.new(0, 5, 0, y)
Â  Â  status.BackgroundTransparency = 1
Â  Â  status.Text = "ğŸ”´ R OFF | ğŸ”´ Q OFF | Mode: Adaptive"
Â  Â  status.TextColor3 = Color3.fromRGB(200, 200, 200)
Â  Â  status.TextXAlignment = Enum.TextXAlignment.Left
Â  Â  status.Font = Enum.Font.SourceSans
Â  Â  status.TextSize = 14
Â  Â  status.Parent = p
Â  Â  y = y + 25

Â  Â  -- HÃ€M Cáº¬P NHáº¬T UI
Â  Â  local function updateUI()
Â  Â  Â  Â  local successRate = CooldownData.pressCount > 0 and
Â  Â  Â  Â  Â  Â  math.floor((CooldownData.successCount / CooldownData.pressCount) * 100) or 0
Â  Â  Â  Â  
Â  Â  Â  Â  status.Text = string.format("%s R | %s Q | %s | Success: %d%%",
Â  Â  Â  Â  Â  Â  isRunningR and "ğŸŸ¢" or "ğŸ”´",
Â  Â  Â  Â  Â  Â  isRunningQ and "ğŸŸ¢" or "ğŸ”´",
Â  Â  Â  Â  Â  Â  currentMode,
Â  Â  Â  Â  Â  Â  successRate
Â  Â  Â  Â  )
Â  Â  end

Â  Â  local modeBtn = Instance.new("TextButton")
Â  Â  modeBtn.Size = UDim2.new(0, 80, 0, 25)
Â  Â  modeBtn.Position = UDim2.new(0, 5, 0, y)
Â  Â  modeBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 120)
Â  Â  modeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
Â  Â  modeBtn.Text = "Adaptive"
Â  Â  modeBtn.Font = Enum.Font.SourceSans
Â  Â  modeBtn.TextSize = 14
Â  Â  modeBtn.Parent = p

Â  Â  local intBox = Instance.new("TextBox")
Â  Â  intBox.Name = "IntervalBox"
Â  Â  intBox.Size = UDim2.new(0, 60, 0, 25)
Â  Â  intBox.Position = UDim2.new(0, 90, 0, y)
Â  Â  intBox.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
Â  Â  intBox.TextColor3 = Color3.fromRGB(255, 255, 255)
Â  Â  intBox.Text = string.format("%.2f", DEFAULT_INTERVAL)
Â  Â  intBox.ClearTextOnFocus = false
Â  Â  intBox.Font = Enum.Font.SourceSans
Â  Â  intBox.TextSize = 14
Â  Â  intBox.Parent = p

Â  Â  local rToggleBtn = Instance.new("TextButton")
Â  Â  rToggleBtn.Size = UDim2.new(0, 100, 0, 25)
Â  Â  rToggleBtn.Position = UDim2.new(1, -105, 0, y)
Â  Â  rToggleBtn.AnchorPoint = Vector2.new(1, 0)
Â  Â  rToggleBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
Â  Â  rToggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
Â  Â  rToggleBtn.Text = "R START (F6)"
Â  Â  rToggleBtn.Font = Enum.Font.SourceSansBold
Â  Â  rToggleBtn.TextSize = 14
Â  Â  rToggleBtn.Parent = p
Â  Â  y = y + 30

Â  Â  local pathBox = Instance.new("TextBox")
Â  Â  pathBox.Name = "PathBox"
Â  Â  pathBox.Size = UDim2.new(1, -10, 0, 20)
Â  Â  pathBox.Position = UDim2.new(0, 5, 0, y)
Â  Â  pathBox.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Â  Â  pathBox.TextColor3 = Color3.fromRGB(255, 255, 255)
Â  Â  pathBox.PlaceholderText = "Auto-detecting GUI..."
Â  Â  pathBox.ClearTextOnFocus = false
Â  Â  pathBox.Font = Enum.Font.SourceSans
Â  Â  pathBox.TextSize = 12
Â  Â  pathBox.Parent = p
Â  Â  y = y + 25

Â  Â  local qToggleBtn = Instance.new("TextButton")
Â  Â  qToggleBtn.Name = "QToggleBtn"
Â  Â  qToggleBtn.Size = UDim2.new(0, 120, 0, 25)
Â  Â  qToggleBtn.Position = UDim2.new(0, 5, 0, y)
Â  Â  qToggleBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
Â  Â  qToggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
Â  Â  qToggleBtn.Text = "ğŸ”˜ Auto Q: OFF"
Â  Â  qToggleBtn.Font = Enum.Font.SourceSansBold
Â  Â  qToggleBtn.TextSize = 14
Â  Â  qToggleBtn.Parent = p
Â  Â  y = y + 30

Â  Â  local infoLabel = Instance.new("TextLabel")
Â  Â  infoLabel.Name = "InfoLabel"
Â  Â  infoLabel.Size = UDim2.new(1, -10, 0, 40)
Â  Â  infoLabel.Position = UDim2.new(0, 5, 0, y)
Â  Â  infoLabel.BackgroundTransparency = 1
Â  Â  infoLabel.Text = "Ready... Press R START/F6. Mode: Adaptive"
Â  Â  infoLabel.TextColor3 = Color3.fromRGB(150, 150, 255)
Â  Â  infoLabel.TextSize = 12
Â  Â  infoLabel.TextXAlignment = Enum.TextXAlignment.Left
Â  Â  infoLabel.TextYAlignment = Enum.TextYAlignment.Top
Â  Â  infoLabel.Parent = p
Â  Â  
Â  Â  -- CONNECT ACTIONS
Â  Â  
Â  Â  -- Toggle R
Â  Â  rToggleBtn.MouseButton1Click:Connect(function()
Â  Â  Â  Â  isRunningR = not isRunningR
Â  Â  Â  Â  rToggleBtn.Text = isRunningR and "R STOP (F6)" or "R START (F6)"
Â  Â  Â  Â  rToggleBtn.BackgroundColor3 = isRunningR and Color3.fromRGB(0, 180, 0) or Color3.fromRGB(200, 0, 0)
Â  Â  Â  Â  infoLabel.Text = isRunningR and "R Running. Monitoring cooldown patterns" or "R Stopped. Ready to continue."
Â  Â  Â  Â  updateUI()
Â  Â  end)

Â  Â  -- Toggle Q
Â  Â  qToggleBtn.MouseButton1Click:Connect(function()
Â  Â  Â  Â  isRunningQ = not isRunningQ
Â  Â  Â  Â  qToggleBtn.Text = isRunningQ and "ğŸŸ¢ Auto Q: ON" or "ğŸ”´ Auto Q: OFF"
Â  Â  Â  Â  qToggleBtn.BackgroundColor3 = isRunningQ and Color3.fromRGB(0, 120, 0) or Color3.fromRGB(80, 80, 80)
Â  Â  Â  Â  infoLabel.Text = isRunningQ and "Auto Q: ON. Pressing R & Q together." or "Auto Q: OFF. Only pressing R."
Â  Â  Â  Â  updateUI()
Â  Â  end)

Â  Â  -- Toggle Mode
Â  Â  modeBtn.MouseButton1Click:Connect(function()
Â  Â  Â  Â  currentMode = (currentMode == "Adaptive") and "Spam" or "Adaptive"
Â  Â  Â  Â  modeBtn.Text = currentMode
Â  Â  Â  Â  modeBtn.BackgroundColor3 = currentMode == "Adaptive" and Color3.fromRGB(60, 60, 120) or Color3.fromRGB(120, 60, 60)
Â  Â  Â  Â  updateUI()
Â  Â  end)
Â  Â  
Â  Â  -- Auto-detect GUI khi panel hiá»‡n
Â  Â  task.spawn(function()
Â  Â  Â  Â  task.wait(3)
Â  Â  Â  Â  local gui = simpleFindGUI()
Â  Â  Â  Â  if gui then
Â  Â  Â  Â  Â  Â  targetGUI = gui
Â  Â  Â  Â  Â  Â  pathBox.Text = gui:GetFullName()
Â  Â  Â  Â  Â  Â  infoLabel.Text = "Auto-detected: " .. gui.Name
Â  Â  Â  Â  end
Â  Â  end)
Â  Â  
Â  Â  -- CUNG Cáº¤P HÃ€M UPDATE RA NGOÃ€I VÃŒ NÃ“ Cáº¦N DÃ™NG TRONG VÃ’NG Láº¶P CHÃNH
Â  Â  return rToggleBtn, intBox, pathBox, infoLabel, updateUI

end

-- ================================================================= --
-- VÃ’NG Láº¶P CHÃNH AUTO HAKI (ADAPTIVE/SPAM)
-- ================================================================= --

local mainLoopActive = true
local loopCount = 0

task.spawn(function()
Â  Â  while mainLoopActive do
Â  Â  Â  Â  if isRunningR then
Â  Â  Â  Â  Â  Â  loopCount = loopCount + 1
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  CooldownData.pressCount = CooldownData.pressCount + 1
Â  Â  Â  Â  Â  Â  CooldownData.lastPressTime = tick()
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  -- Nháº¥n phÃ­m R
Â  Â  Â  Â  Â  Â  pcall(doKeyTap, DEFAULT_KEY)
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  -- Nháº¥n phÃ­m Q náº¿u Ä‘Æ°á»£c báº­t riÃªng biá»‡t
Â  Â  Â  Â  Â  Â  if isRunningQ then
Â  Â  Â  Â  Â  Â  Â  Â  pcall(doKeyTap, SECONDARY_KEY)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  -- TÃ¬m/Kiá»ƒm tra GUI (ÄÃ£ Ä‘Æ°á»£c Ä‘Æ¡n giáº£n hÃ³a)
Â  Â  Â  Â  Â  Â  if not targetGUI then
Â  Â  Â  Â  Â  Â  Â  Â  targetGUI = simpleFindGUI()
Â  Â  Â  Â  Â  Â  end

Â  Â  Â  Â  Â  Â  if targetGUI then
Â  Â  Â  Â  Â  Â  Â  Â  checkCooldown(targetGUI)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  -- Cáº­p nháº­t interval
Â  Â  Â  Â  Â  Â  local waitTime = simpleInterval(DEFAULT_INTERVAL) -- DÃ¹ng default vÃ¬ khÃ´ng cÃ³ biáº¿n intBox á»Ÿ Ä‘Ã¢y
Â  Â  Â  Â  Â  Â  if currentMode == "Adaptive" then
Â  Â  Â  Â  Â  Â  Â  Â  waitTime = getSmartInterval()
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  task.wait(waitTime)
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  else
Â  Â  Â  Â  Â  Â  task.wait(0.5)
Â  Â  Â  Â  end
Â  Â  end
end)

-- (Giá»¯ láº¡i táº¥t cáº£ vÃ²ng láº·p khÃ¡c: AutoSkill, AutoFarmNPC, GodMode, DropItem, CollectChest)
-- ... (CÃ¡c pháº§n nÃ y giá»¯ nguyÃªn nhÆ° script gá»‘c) ...
-- ... (Logic AutoFarmPanel, AutoNPCPanel, FruitMixPanel, UtilityPanel, SettingsPanel giá»¯ nguyÃªn) ...

-- Cleanup khi player leave
if player then
Â  Â  player.AncestryChanged:Connect(function()
Â  Â  Â  Â  mainLoopActive = false
Â  Â  Â  Â  pcall(function() ScreenGui:Destroy() end)
Â  Â  end)
end

print("NTBA Farm Hub v21.2.5 - Auto Haki Adaptive/Spam & Auto Q Ä‘Ã£ Ä‘Æ°á»£c tÃ­ch há»£p!")
