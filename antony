-- Fruit Hub Xeno Compatible
-- By ChatGPT

local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Orion/main/source"))()
local Window = OrionLib:MakeWindow({
    Name = "üçé Fruit Hub Xeno",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "FruitHubXeno"
})

-- Tabs
local FarmTab = Window:MakeTab({Name = "Farm Fruit", Icon = "rbxassetid://4483345998", PremiumOnly = false})
local HakiTab = Window:MakeTab({Name = "Farm Haki", Icon = "rbxassetid://4483345998", PremiumOnly = false})
local AutoFruitTab = Window:MakeTab({Name = "Auto Fruit", Icon = "rbxassetid://4483345998", PremiumOnly = false})
local SettingTab = Window:MakeTab({Name = "Settings", Icon = "rbxassetid://4483345998", PremiumOnly = false})

local player = game.Players.LocalPlayer
local VIM = game:GetService("VirtualInputManager")

-- FARM FRUIT (Z/X/C/V)
local AutoSkills = {Z=false,X=false,C=false,V=false}

for _,key in ipairs({"Z","X","C","V"}) do
    FarmTab:AddToggle({
        Name = "Auto "..key,
        Default = false,
        Callback = function(v) AutoSkills[key] = v end
    })
end

task.spawn(function()
    while task.wait(0.2) do
        for key,state in pairs(AutoSkills) do
            if state then
                VIM:SendKeyEvent(true, Enum.KeyCode[key], false, game)
                task.wait(0.05)
                VIM:SendKeyEvent(false, Enum.KeyCode[key], false, game)
            end
        end
    end
end)

-- FARM HAKI (R)
local AutoHaki = false
HakiTab:AddToggle({
    Name = "Auto Haki (R)",
    Default = false,
    Callback = function(v) AutoHaki=v end
})

task.spawn(function()
    while task.wait(8) do
        if AutoHaki then
            VIM:SendKeyEvent(true, Enum.KeyCode.R, false, game)
            task.wait(0.2)
            VIM:SendKeyEvent(false, Enum.KeyCode.R, false, game)
        end
    end
end)

-- AUTO FRUIT
local RF_RareDevilfruit = {
    "Smoke","Sand","Rumble","Quake","Phoenix","Ope","Magma","Light",
    "Hollow","Alice","Gas","Flare","Dark","Chilly","Candy",
    "Plasma","Gravity","Vampire","Venom","Snow","Luck"
}
local FruitToggles = {}

for _,fruit in ipairs(RF_RareDevilfruit) do
    FruitToggles[fruit] = false
    AutoFruitTab:AddToggle({
        Name = "Auto Pick "..fruit,
        Default = false,
        Callback = function(v) FruitToggles[fruit] = v end
    })
end

local function pickFruit(fruitModel)
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and fruitModel:FindFirstChild("Handle") then
        player.Character.HumanoidRootPart.CFrame = fruitModel.Handle.CFrame + Vector3.new(0,2,0)
        task.wait(0.05)
        local cd = fruitModel.Handle:FindFirstChildOfClass("ClickDetector")
        if cd then fireclickdetector(cd) end
    end
end

task.spawn(function()
    while task.wait(0.2) do
        for _, v in pairs(workspace:GetChildren()) do
            if v:IsA("Tool") or v:IsA("Model") then
                for fruit, enabled in pairs(FruitToggles) do
                    if enabled and v.Name:find(fruit) and v.Name:find("Fruit") then
                        pickFruit(v)
                    end
                end
            end
        end
    end
end)

workspace.ChildAdded:Connect(function(v)
    task.wait(0.1)
    if v:IsA("Tool") or v:IsA("Model") then
        for fruit, enabled in pairs(FruitToggles) do
            if enabled and v.Name:find(fruit) and v.Name:find("Fruit") then
                pickFruit(v)
            end
        end
    end
end)

-- SETTINGS
SettingTab:AddButton({
    Name = "Rejoin Server",
    Callback = function()
        game:GetService("TeleportService"):Teleport(game.PlaceId, player)
    end
})

-- Hotkey toggle UI (RightCtrl m·∫∑c ƒë·ªãnh)
local UIS = game:GetService("UserInputService")
local Hotkey = Enum.KeyCode.RightControl
UIS.InputBegan:Connect(function(input,gpe)
    if not gpe and input.KeyCode==Hotkey then
        OrionLib:ToggleUI()
    end
end)

OrionLib:Init()
