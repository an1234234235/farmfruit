-- Fruit Hub - NTBA v2.4 - Remote Tester Mode
-- Th·ª≠ nghi·ªám c√°c t√™n Remote ph·ªï bi·∫øn nh·∫•t ƒë·ªÉ nh·∫∑t tr√°i c√¢y
-- Ch·∫°y tr√™n Xeno/Volcano

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

-- (Gi·ªØ nguy√™n to√†n b·ªô UI Init code t·ª´ v2.3 ·ªü ƒë√¢y. T√¥i l∆∞·ª£c b·ªõt ƒë·ªÉ code n√†y ng·∫Øn g·ªçn h∆°n.)
-- ... (H√£y gi·ªØ nguy√™n c√°c ph·∫ßn UI, AutoFarm, AutoHaki, v√† Logic Toggles c·ªßa v2.3) ...

-- üåü PH·∫¶N QUAN TR·ªåNG NH·∫§T: TH·ª¨ NGHI·ªÜM REMOTE üåü
-- Danh s√°ch c√°c t√™n Remote ph·ªï bi·∫øn nh·∫•t trong c√°c game One Piece
local REMOTE_CANDIDATES = {
    -- ·ª®ng vi√™n 1: Remote Event ƒë·ªÉ nh·∫∑t
    "PickUpRemote", 
    "HandlePickUp",
    "InteractRemote",
    "GrabItem",
    
    -- ·ª®ng vi√™n 2: T√™n chung chung ho·∫∑c m√£ h√≥a (th∆∞·ªùng n·∫±m trong th∆∞ m·ª•c Remote)
    "remoteEvent", 
    "remoteEvent2",
    
    -- ·ª®ng vi√™n 3: Remote n·∫±m trong th∆∞ m·ª•c con
    "Remotes/Grab",
    "Rems/Pick", 
}

-- H√†m t√¨m Remote Event ƒëang ho·∫°t ƒë·ªông
local function findActiveRemote()
    for _, name in ipairs(REMOTE_CANDIDATES) do
        local remotePath = ReplicatedStorage
        local parts = string.split(name, "/")
        
        for i, partName in ipairs(parts) do
            remotePath = remotePath:FindFirstChild(partName)
            if not remotePath then break end
        end
        
        if remotePath and (remotePath:IsA("RemoteEvent") or remotePath:IsA("RemoteFunction")) then
            print("NTBA AutoFruit: T√¨m th·∫•y Remote h·ª£p l·ªá: " .. name)
            return remotePath
        end
    end
    print("NTBA AutoFruit: KH√îNG t√¨m th·∫•y Remote h·ª£p l·ªá trong danh s√°ch th·ª≠ nghi·ªám.")
    return nil
end

local FRUIT_PICKUP_REMOTE = findActiveRemote() -- T√¨m ngay khi script ch·∫°y!

-- H√†m nh·∫∑t tr√°i c√¢y ƒë√£ ch·ªânh s·ª≠a
local function pickupFruit(tool)
    if not tool or not player.Character then return end
    local handle = tool:FindFirstChild("Handle") or tool:FindFirstChildWhichIsA("BasePart")
    local hrp = player.Character:FindFirstChild("HumanoidRootPart")
    if not handle or not hrp or not FRUIT_PICKUP_REMOTE then return end

    -- 1. Teleport t·ªõi g·∫ßn tr√°i c√¢y (lu√¥n c·∫ßn thi·∫øt ƒë·ªÉ v∆∞·ª£t qua ki·ªÉm tra kho·∫£ng c√°ch)
    pcall(function()
        hrp.CFrame = handle.CFrame * CFrame.new(0, handle.Size.Y / 2 + 1, 0)
    end)
    task.wait(0.05)
    
    -- 2. TH·ª∞C HI·ªÜN REMOTE CALL
    pcall(function()
        -- Truy·ªÅn tham s·ªë l√† to√†n b·ªô ƒë·ªëi t∆∞·ª£ng tr√°i c√¢y (tool/model)
        FRUIT_PICKUP_REMOTE:FireServer(tool) 
    end)
    
    -- Kh√¥ng c·∫ßn FireTouch hay Proximity n·ªØa, ch·ªâ c·∫ßn Remote Call.
end

-- (Gi·ªØ nguy√™n v√≤ng l·∫∑p ch√≠nh v√† logic ChildAdded c·ªßa v2.3 ƒë·ªÉ g·ªçi h√†m pickupFruit)

-- V√≤ng l·∫∑p ch√≠nh ƒë√£ s·ª≠a
task.spawn(function()
    while true do
        task.wait(0.1)
        if not FRUIT_PICKUP_REMOTE then 
             -- N·∫øu Remote ch∆∞a ƒë∆∞·ª£c t√¨m th·∫•y, c·ªë g·∫Øng t√¨m l·∫°i 
             FRUIT_PICKUP_REMOTE = findActiveRemote()
        end
        
        -- ... (Logic t√¨m tr√°i c√¢y trong Workspace v√† g·ªçi pickupFruit) ...
        -- L∆∞·ª£c b·ªõt ƒë·ªÉ code n√†y ng·∫Øn g·ªçn, b·∫°n h√£y d√πng l·∫°i logic n√†y t·ª´ v2.3
        
        local fruitsFound = {}
        for _,v in ipairs(workspace:GetChildren()) do
            if (v:IsA("Tool") or v:IsA("Model")) and v:FindFirstChild("Handle") and string.find(v.Name,"Fruit") then
                table.insert(fruitsFound, v)
            end
        end

        for _, fruit in ipairs(fruitsFound) do
            local shouldPick = AutoPickAllFruits -- S·ª≠ d·ª•ng Master Toggle
            
            if not shouldPick then
                for fname, on in pairs(FruitPickToggles) do
                    if on and string.find(fruit.Name, fname) then
                        shouldPick = true
                        break
                    end
                end
            end

            if shouldPick then
                pcall(function() pickupFruit(fruit) end)
                task.wait(0.2)
            end
        end
    end
end)

print("NTBA Fruit Hub v2.4 - Remote Tester Mode Activated.")
