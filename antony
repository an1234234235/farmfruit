--// Library UI
local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

local Window = OrionLib:MakeWindow({
    Name = "My Hub",
    HidePremium = false,
    SaveConfig = true,
    IntroText = "My Custom Hub",
    ConfigFolder = "MyHubConfig"
})

--// Tabs
local FarmTab = Window:MakeTab({Name = "Farm Fruit", Icon = "rbxassetid://4483345998", PremiumOnly = false})
local HakiTab = Window:MakeTab({Name = "Farm Haki", Icon = "rbxassetid://4483345998", PremiumOnly = false})
local AutoFruitTab = Window:MakeTab({Name = "Auto Fruit", Icon = "rbxassetid://4483345998", PremiumOnly = false})
local SettingTab = Window:MakeTab({Name = "Settings", Icon = "rbxassetid://4483345998", PremiumOnly = false})

--// FARM FRUIT (auto spam skill Z X C V)
local FarmKeys = {"Z", "X", "C", "V"}
local FarmFruit = false

FarmTab:AddToggle({
    Name = "Auto Farm Fruit (Z,X,C,V)",
    Default = false,
    Callback = function(Value)
        FarmFruit = Value
        if FarmFruit then
            task.spawn(function()
                while FarmFruit do
                    task.wait(0.5)
                    for _, key in ipairs(FarmKeys) do
                        game:GetService("VirtualInputManager"):SendKeyEvent(true, key, false, game)
                        task.wait(0.05)
                        game:GetService("VirtualInputManager"):SendKeyEvent(false, key, false, game)
                    end
                end
            end)
        end
    end
})

--// FARM HAKI (auto spam R)
local FarmHaki = false
HakiTab:AddToggle({
    Name = "Auto Farm Haki (R)",
    Default = false,
    Callback = function(Value)
        FarmHaki = Value
        if FarmHaki then
            task.spawn(function()
                while FarmHaki do
                    task.wait(1)
                    game:GetService("VirtualInputManager"):SendKeyEvent(true, "R", false, game)
                    task.wait(0.05)
                    game:GetService("VirtualInputManager"):SendKeyEvent(false, "R", false, game)
                end
            end)
        end
    end
})

--// AUTO FRUIT (nhặt nhanh, thêm Luck)
local AutoFruit = false
local FruitList = {
    "Bomb", "Spin", "Chop", "Spring", "Kilo",
    "Luck", "Smoke", "Sand", "Rumble", "Quake",
    "Phoenix", "Ope", "Magma", "Light", "Dark"
}

AutoFruitTab:AddToggle({
    Name = "Auto Collect Fruits (Fast)",
    Default = false,
    Callback = function(Value)
        AutoFruit = Value
        if AutoFruit then
            task.spawn(function()
                while AutoFruit do
                    task.wait(0.2)
                    for _, fruit in pairs(game.Workspace:GetChildren()) do
                        if fruit:IsA("Tool") and table.find(FruitList, fruit.Name) then
                            local plr = game.Players.LocalPlayer
                            if plr.Character and fruit:FindFirstChild("Handle") then
                                -- Tele nhanh tới fruit
                                plr.Character.HumanoidRootPart.CFrame = fruit.Handle.CFrame
                                -- Nhặt ngay
                                pcall(function()
                                    firetouchinterest(plr.Character.HumanoidRootPart, fruit.Handle, 0)
                                    firetouchinterest(plr.Character.HumanoidRootPart, fruit.Handle, 1)
                                end)
                            end
                        end
                    end
                end
            end)
        end
    end
})

--// SETTINGS
SettingTab:AddButton({
    Name = "Rejoin Server",
    Callback = function()
        game:GetService("TeleportService"):Teleport(game.PlaceId, game.Players.LocalPlayer)
    end
})

-- Toggle key
local UIS = game:GetService("UserInputService")
local ToggleKey = Enum.KeyCode.RightControl  -- mặc định Ctrl phải
SettingTab:AddTextbox({
    Name = "Set Toggle Key (Ví dụ: F4, RightControl)",
    Default = "RightControl",
    TextDisappear = true,
    Callback = function(Value)
        pcall(function()
            ToggleKey = Enum.KeyCode[Value]
        end)
    end
})

UIS.InputBegan:Connect(function(input, gpe)
    if not gpe and input.KeyCode == ToggleKey then
        OrionLib:ToggleUI()
    end
end)

-- UI Scale để fix tràn
SettingTab:AddSlider({
    Name = "UI Scale",
    Min = 50,
    Max = 150,
    Default = 100,
    Color = Color3.fromRGB(255,255,255),
    Increment = 5,
    ValueName = "%",
    Callback = function(Value)
        local CoreGui = game:GetService("CoreGui")
        local Orion = CoreGui:FindFirstChild("Orion")
        if Orion then
            Orion.Size = UDim2.new(0, 500 * (Value/100), 0, 350 * (Value/100))
        end
    end
})

--// Init
OrionLib:Init()
